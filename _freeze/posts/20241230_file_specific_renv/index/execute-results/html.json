{
  "hash": "55ce43b3342db7054bbce38eafa73b28",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"File-Specific Environments in R with `renv::use()`\"\ndate: 2020.12.31\n---\n\n\n\n\n# Introduction\n\nThe `use()` function from `{renv}` package is a powerful way to create an isolated library for use with a single file (i.e. `.R`, `.qmd`, `.rmd`, ...). Since this library is temporary and independent from the project-specific library it is very handy in following scenarios:\n\n-   **Testing new package versions** – a new package version can be installed tested without interfiring with project-specific library.\n\n-   **Ensure blog reproducibility** – blogs usually require diverse set of packages. Maintaining single project library for all blogs will lead to library clutter and will likely introduce dependency conflicts over time, rendering older blogs irreproducible.\n\n# Create a temporary library for a file\n\nTo create a temporary library for a file, include `renv::use()` at the beginning of a file:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrenv::use(\"ggplot2@3.5.0\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nThe following package(s) will be installed:\n- cli          [3.6.4]\n- colorspace   [2.1-1]\n- fansi        [1.0.6]\n- farver       [2.1.2]\n- ggplot2      [3.5.0]\n- glue         [1.8.0]\n- gtable       [0.3.6]\n- isoband      [0.2.7]\n- labeling     [0.4.3]\n- lifecycle    [1.0.4]\n- magrittr     [2.0.3]\n- munsell      [0.5.1]\n- pillar       [1.10.1]\n- pkgconfig    [2.0.3]\n- R6           [2.6.1]\n- RColorBrewer [1.1-3]\n- rlang        [1.1.5]\n- scales       [1.3.0]\n- tibble       [3.2.1]\n- utf8         [1.2.4]\n- vctrs        [0.6.5]\n- viridisLite  [0.4.2]\n- withr        [3.0.2]\nThese packages will be installed into \"/tmp/RtmpzVSZnb/renv-use-libpath-26a33e150df1\".\n\n# Installing packages --------------------------------------------------------\n- Installing cli ...                            OK [linked from cache]\n- Installing glue ...                           OK [linked from cache]\n- Installing rlang ...                          OK [linked from cache]\n- Installing lifecycle ...                      OK [linked from cache]\n- Installing gtable ...                         OK [linked from cache]\n- Installing isoband ...                        OK [linked from cache]\n- Installing farver ...                         OK [linked from cache]\n- Installing labeling ...                       OK [linked from cache]\n- Installing colorspace ...                     OK [linked from cache]\n- Installing munsell ...                        OK [linked from cache]\n- Installing R6 ...                             OK [linked from cache]\n- Installing RColorBrewer ...                   OK [linked from cache]\n- Installing viridisLite ...                    OK [linked from cache]\n- Installing scales ...                         OK [linked from cache]\n- Installing fansi ...                          OK [linked from cache]\n- Installing magrittr ...                       OK [linked from cache]\n- Installing utf8 ...                           OK [linked from cache]\n- Installing vctrs ...                          OK [linked from cache]\n- Installing pillar ...                         OK [linked from cache]\n- Installing pkgconfig ...                      OK [linked from cache]\n- Installing tibble ...                         OK [linked from cache]\n- Installing withr ...                          OK [linked from cache]\n- Installing ggplot2 ...                        OK [linked from cache]\nSuccessfully installed 23 packages in 60 milliseconds.\n\nThe following loaded package(s) have been updated:\n- cli\n- rlang\nRestart your R session to use the new versions.\n```\n\n\n:::\n:::\n\n\n\n\nAs reported by `{renv}`, the package was installed in temporary directory:\n\n```         \n\"/tmp/Rtmpn79OzQ/renv-use-libpath-275020564a66\"\n```\n\n::: callout-note\npackages can also be specified with `renv.lock` as follows `renv::use(lockfile = \"path_to_renv.lock_file\")`\n:::\n\n# Isolation type\n\nBy default, `use()` will completely isolate the library, meaning that only the temporary library is available at the library path:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n.libPaths()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"/tmp/RtmpzVSZnb/renv-use-libpath-26a33e150df1\"\n[2] \"/tmp/RtmpzVSZnb/renv-sandbox\"                 \n```\n\n\n:::\n:::\n\n\n\n\n::: callout-note\nThe second path is not project-specific library but rather `{renv}`'s cache\n:::\n\nThis behavior is particularly useful for blogs, where each blog benefits from an explicit, independent library. However, the project-specific library can also be included alongside the temporary library:\n\n\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nrenv::use(\"ggplot2@3.5.0\", isolate = FALSE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nThe following package(s) will be installed:\n- ggplot2 [3.5.0]\nThese packages will be installed into \"/tmp/RtmpzVSZnb/renv-use-libpath-26a33e150df1\".\n\n# Installing packages --------------------------------------------------------\n- Installing ggplot2 ...                        OK [linked from cache]\nSuccessfully installed 1 package in 3.7 milliseconds.\n```\n\n\n:::\n:::\n\n\n\n\nNow, both the temporary library and the project-specific library will be available at library path:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n.libPaths()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"/tmp/RtmpzVSZnb/renv-use-libpath-26a33e150df1\"    \n[2] \"/home/amelzulji/R/x86_64-pc-linux-gnu-library/4.4\"\n[3] \"/tmp/RtmpzVSZnb/renv-sandbox\"                     \n```\n\n\n:::\n:::\n\n\n\n\nThis option is ideal for testing a new package version within a project that already has many dependencies, ensuring compatibility without modifying the project-specific library.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}